apiVersion: elasticsearch.k8s.elastic.co/v1
kind: Elasticsearch
metadata:
  annotations:
    eck.k8s.elastic.co/orchestration-hints: '{"no_transient_settings":true,"service_accounts":false}'
    elasticsearch.k8s.elastic.co/cluster-uuid: Jkf6pQnPRYeBBa6I8zdwyA
  name: mes01
spec:
  auth: {}
  http:
    service:
      metadata: {}
      spec:
        type: NodePort
    tls:
      selfSignedCertificate:
        disabled: true
  image: elastic.m.daocloud.io/elasticsearch/elasticsearch:7.16.3
  monitoring:
    logs: {}
    metrics: {}
  nodeSets:
  - config:
      node.roles:
      - data
      discovery.seed_hosts:
      - 10.29.26.76:30001
      - 10.29.16.22:9301
      cluster.initial_master_nodes:
      - 10.29.26.76:30001
      - 10.29.16.22:9301
      network.publish_host:
      - 10.29.26.76
      transport.port: 30002
      xpack.security.enabled: false
      xpack.security.transport.ssl.enabled: false
    count: 1
    name: data
    podTemplate:
      metadata:
        creationTimestamp: null
        labels:
          elasticsearch.k8s.elastic.co/node-role: data
      spec:
        containers:
        - command:
          - /bin/sh
          - -cxe
          - ulimit -HSn 65535 && /bin/tini -- /usr/local/bin/docker-entrypoint.sh
            eswrapper
          name: elasticsearch
          resources:
            limits:
              cpu: "1"
              memory: 1Gi
            requests:
              cpu: 500m
              memory: 1Gi
          securityContext:
            capabilities:
              add:
              - SYS_RESOURCE
        initContainers:
        - command:
          - sh
          - -c
          - sysctl -w vm.max_map_count=262144
          name: sysctl
          resources: {}
          securityContext:
            privileged: true
            runAsUser: 0
  - config:
      node.roles:
      - master
      discovery.seed_hosts:
      - 10.29.16.22:9301
      - 10.29.26.76:30001
      cluster.initial_master_nodes:
      - 10.29.16.22:9301
      - 10.29.26.76:30001
      transport.port: 30001
      xpack.security.enabled: false
      xpack.security.transport.ssl.enabled: false
    count: 1
    name: master
    podTemplate:
      metadata:
        creationTimestamp: null
        labels:
          elasticsearch.k8s.elastic.co/node-role: master
      spec:
        containers:
        - command:
          - /bin/sh
          - -cxe
          - ulimit -HSn 65535 && /bin/tini -- /usr/local/bin/docker-entrypoint.sh
            eswrapper
          name: elasticsearch
          resources:
            limits:
              cpu: "1"
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 107374182400m
          securityContext:
            capabilities:
              add:
              - SYS_RESOURCE
        initContainers:
        - command:
          - sh
          - -c
          - sysctl -w vm.max_map_count=262144
          name: sysctl
          resources: {}
          securityContext:
            privileged: true
            runAsUser: 0
  transport:
    service:
      metadata: {}
      spec: {}
    tls:
      certificate: {}
  updateStrategy:
    changeBudget: {}
  version: 7.16.3
---
apiVersion: elasticsearch.k8s.elastic.co/v1
kind: Elasticsearch
metadata:
  name: mes01
spec:
  auth: {}
  http:
    service:
      metadata: {}
      spec:
        ports:
        - name: https
          port: 9200
          protocol: TCP
          targetPort: 9200
        type: NodePort
    tls:
      certificate: {}
  image: elastic.m.daocloud.io/elasticsearch/elasticsearch:7.16.3
  monitoring:
    logs: {}
    metrics: {}
  nodeSets:
  - config:
      node.roles:
      - data
      discovery.seed_hosts:
      - 10.29.26.76:30001
      - 10.29.26.78:30003
      cluster.initial_master_nodes:
      - 10.29.26.76:30001
      - 10.29.26.78:30003
      network.publish_host:
      - 10.29.26.76
      transport.port: 30002
      # xpack.security.enabled: false
      # xpack.security.transport.ssl.enabled: false
    count: 1
    name: data
    podTemplate:
      metadata:
        creationTimestamp: null
        labels:
          elasticsearch.k8s.elastic.co/node-role: data
      spec:
        containers:
        - command:
          - /bin/sh
          - -cxe
          - ulimit -HSn 65535 && /bin/tini -- /usr/local/bin/docker-entrypoint.sh
            eswrapper
          name: elasticsearch
          resources:
            limits:
              cpu: "1"
              memory: 1Gi
            requests:
              cpu: 500m
              memory: 1Gi
          securityContext:
            capabilities:
              add:
              - SYS_RESOURCE
        initContainers:
        - command:
          - sh
          - -c
          - sysctl -w vm.max_map_count=262144
          name: sysctl
          resources: {}
          securityContext:
            privileged: true
            runAsUser: 0
  - config:
      node.roles:
      - master
      discovery.seed_hosts:
      - 10.29.26.76:30001
      - 10.29.26.78:30003
      cluster.initial_master_nodes:
      - 10.29.26.76:30001
      - 10.29.26.78:30003
      network.publish_host:
      - 10.29.26.76
      transport.port: 30001
      # xpack.security.enabled: false
      # xpack.security.transport.ssl.enabled: false
    count: 1
    name: master
    podTemplate:
      metadata:
        creationTimestamp: null
        labels:
          elasticsearch.k8s.elastic.co/node-role: master
      spec:
        containers:
        - command:
          - /bin/sh
          - -cxe
          - ulimit -HSn 65535 && /bin/tini -- /usr/local/bin/docker-entrypoint.sh
            eswrapper
          name: elasticsearch
          resources:
            limits:
              cpu: "1"
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 107374182400m
          securityContext:
            capabilities:
              add:
              - SYS_RESOURCE
        initContainers:
        - command:
          - sh
          - -c
          - sysctl -w vm.max_map_count=262144
          name: sysctl
          resources: {}
          securityContext:
            privileged: true
            runAsUser: 0
  transport:
    service:
      metadata: {}
      spec: {}
    tls:
      certificate: {}
  updateStrategy:
    changeBudget: {}
  version: 7.16.3